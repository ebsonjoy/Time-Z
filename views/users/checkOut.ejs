<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>WatchNest</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="" />
    <meta property="og:type" content="" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />
    <!-- Favicon -->
    <script src="https://kit.fontawesome.com/5f59412c1e.js" crossorigin="anonymous"></script>

 <!-- Include necessary CSS and JavaScript files, such as Bootstrap, Swal, and Razorpay -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
<!-- <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script> -->


<link
rel="shortcut icon"
type="image/x-icon"
href="/static/products/titleimg.jpg"
/>
    <!-- Template CSS -->
    <link rel="stylesheet" href="/static/User_assets/css/main.css?v=3.4" />

    <!-- <style>
      .custom-alert {
          background-color: #f8d7da;
          border: 1px solid #f5c6cb;
          color: #721c24;
          padding: 0.75rem 1.25rem;
          margin-bottom: 0;
          border-radius: 0.25rem;
      }
  </style> -->
  


    <!-- coupons -->
    <style>
      .bodyy {
          font-family: Arial, sans-serif;
          /* margin: 0;
          padding: 0;
          background-color: #f2f2f2; */
      }
      .coupon-container {
          /* max-width: 800px;
          margin: 20px auto; */
          display: flex;
          flex-wrap: wrap;
          gap: 10px;
          /* justify-content: space-between; */
      }
      .coupon-box {
          flex: 0 0 calc(33.3333% - 10px);
          background-color: #fff;
          border-radius: 8px;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
          padding: 10px;
          margin-bottom: 20px;
          border: 1px dashed #ccc;
      }
      .coupon-title {
          font-size: 16px;
          font-weight: bold;
          text-align: center;
          margin-bottom: 5px;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
      }
      .coupon-details {
          text-align: center;
          font-size: 14px;
          color: #555;
          line-height: 1.5;
      }
      .coupon-detail {
          display: inline-block;
          padding: 0 5px;
      }
      .coupon-detail:not(:last-child) {
          border-right: 1px solid #ccc;
      }
      .coupon-detail-value {
          color: #333;
      }
  </style>

    <!-- Style the checkbox container  -->

    <style>
      
.checkout_input_checkbox {
    display: block;
    margin-bottom: 10px;
}

/* Hide the default checkbox */
.checkout_input_checkbox input[type="checkbox"] {
    display: none;
}

/* Style the custom checkbox */
.checkout_input_checkbox .checkmark {
    position: relative;
    display: inline-block;
    width: 22px;
    height: 22px;
    background-color: #ddd;
    border-radius: 3px;
    margin-right: 10px;
}

/* Style the checkbox label text */
.checkout_input_checkbox .payment-label {
    font-size: 16px;
    color: #333;
    cursor: pointer;
}

/* Style the checked state of the custom checkbox */
.checkout_input_checkbox input[type="checkbox"]:checked + .checkmark::after {
    content: '';
    position: absolute;
    left: 7px;
    top: 3px;
    width: 5px;
    height: 10px;
    border: solid #333;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
}

    </style>


    <!-- addresss -->
    <style>
      /* CSS to adjust radio button size and color */
      .radio-box {
          display: flex; /* Use flexbox to align items horizontally */
          align-items: center; /* Center items vertically */
      }
  
      .radio-box input[type="radio"] {
          width: 20px; /* Adjust width as needed */
          height: 20px; /* Adjust height as needed */
          background-color: #046963; /* Change the background color */
          border-radius: 50%; /* Ensure the radio button is circular */
          margin-right: 10px; /* Adjust spacing between radio button and text */
      }

      .billing-page {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        .billing-details {
            margin-bottom: 20px;
        }
        .billing-details label {
            font-weight: bold;
        }
  </style>

  <!-- coupon -->

  <style>
    .modal {
      display: none; 
      position: fixed; 
      z-index: 1; 
      left: 0;
      top: 0; /* Updated to display at the top */
      width: 100%; 
      height: 100%; 
      overflow: auto; 
      background-color: rgba(0,0,0,0.8); /* Darkened background */
    }
    
    .modal-content {
      background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%); /* Gradient background */
      margin: 10% auto;
      padding: 20px;
      border-radius: 15px; /* Rounded corners */
      max-width: 400px;
      text-align: center;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3); /* More pronounced shadow */
    }
    
    .close {
      color: #555; /* Dark gray for close button */
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    
    .close:hover,
    .close:focus {
      color: #333; /* Slightly darker gray on hover/focus */
      text-decoration: none;
    }
    
    .coupon {
      margin-top: 20px; /* Updated to display at the top */
      padding: 20px;
      background: #fff; /* White background */
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease;
    }
    
    .coupon:hover {
      transform: translateY(-5px);
    }
    
    .coupon h3 {
      color: #333; /* Dark gray for heading */
      font-family: 'Helvetica', sans-serif; /* Custom font */
    }
    
    .coupon p {
      margin-top: 10px;
      color: #666; /* Gray for paragraph */
      font-size: 14px; /* Smaller font size */
    }
    
    .buttons {
      background: linear-gradient(to bottom, #4CAF50 0%, #45a049 100%); /* Gradient background */
      border: none;
      color: white;
      padding: 12px 24px; /* Slightly larger padding */
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 18px; /* Larger font size */
      margin-top: 20px;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s ease;
      font-family: 'Arial', sans-serif; /* Custom font */
    }
    
    .buttons:hover {
      background: linear-gradient(to bottom, #45a049 0%, #4CAF50 100%); /* Darker gradient on hover */
    }
</style>



 
  </head>

  <body>
    <!-- Quick view -->
    <div
      class="modal fade custom-modal"
      id="quickViewModal"
      tabindex="-1"
      aria-labelledby="quickViewModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
          <div class="modal-body">
            <div class="row">
              <div class="col-md-6 col-sm-12 col-xs-12">
                <div class="detail-gallery">
                  <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                  <!-- MAIN SLIDES -->
                  <div class="product-image-slider">
                    <figure class="border-radius-10">
                      <img
                        src="/static/User_assets/imgs/shop/product-16-2.jpg"
                        alt="product image"
                      />
                    </figure>
                    <figure class="border-radius-10">
                      <img
                        src="/static/User_assets/imgs/shop/product-16-1.jpg"
                        alt="product image"
                      />
                    </figure>
                    <figure class="border-radius-10">
                      <img
                        src="/static/User_assets/imgs/shop/product-16-3.jpg"
                        alt="product image"
                      />
                    </figure>
                    <figure class="border-radius-10">
                      <img
                        src="/static/User_assets/imgs/shop/product-16-4.jpg"
                        alt="product image"
                      />
                    </figure>
                    <figure class="border-radius-10">
                      <img
                        src="/static/User_assets/imgs/shop/product-16-5.jpg"
                        alt="product image"
                      />
                    </figure>
                    <figure class="border-radius-10">
                      <img
                        src="/static/User_assets/imgs/shop/product-16-6.jpg"
                        alt="product image"
                      />
                    </figure>
                    <figure class="border-radius-10">
                      <img
                        src="/static/User_assets/imgs/shop/product-16-7.jpg"
                        alt="product image"
                      />
                    </figure>
                  </div>
                  <!-- THUMBNAILS -->
                  <div class="slider-nav-thumbnails pl-15 pr-15">
                    <div>
                      <img
                        src="/static/User_assets/imgs/shop/thumbnail-3.jpg"
                        alt="product image"
                      />
                    </div>
                    <div>
                      <img
                        src="/static/User_assets/imgs/shop/thumbnail-4.jpg"
                        alt="product image"
                      />
                    </div>
                    <div>
                      <img
                        src="/static/User_assets/imgs/shop/thumbnail-5.jpg"
                        alt="product image"
                      />
                    </div>
                    <div>
                      <img
                        src="/static/User_assets/imgs/shop/thumbnail-6.jpg"
                        alt="product image"
                      />
                    </div>
                    <div>
                      <img
                        src="/static/User_assets/imgs/shop/thumbnail-7.jpg"
                        alt="product image"
                      />
                    </div>
                    <div>
                      <img
                        src="/static/User_assets/imgs/shop/thumbnail-8.jpg"
                        alt="product image"
                      />
                    </div>
                    <div>
                      <img
                        src="/static/User_assets/imgs/shop/thumbnail-9.jpg"
                        alt="product image"
                      />
                    </div>
                  </div>
                </div>
                <!-- End Gallery -->
                <div class="social-icons single-share">
                  <ul class="text-grey-5 d-inline-block">
                    <li><strong class="mr-10">Share this:</strong></li>
                    <li class="social-facebook">
                      <a href="#"
                        ><img
                          src="/static/User_assets/imgs/theme/icons/icon-facebook.svg"
                          alt=""
                      /></a>
                    </li>
                    <li class="social-twitter">
                      <a href="#"
                        ><img
                          src="/static/User_assets/imgs/theme/icons/icon-twitter.svg"
                          alt=""
                      /></a>
                    </li>
                    <li class="social-instagram">
                      <a href="#"
                        ><img
                          src="/static/User_assets/imgs/theme/icons/icon-instagram.svg"
                          alt=""
                      /></a>
                    </li>
                    <li class="social-linkedin">
                      <a href="#"
                        ><img
                          src="/static/User_assets/imgs/theme/icons/icon-pinterest.svg"
                          alt=""
                      /></a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="col-md-6 col-sm-12 col-xs-12">
                <div class="detail-info">
                  <h3 class="title-detail mt-30">
                    Colorful Pattern Shirts HD450
                  </h3>
                  <div class="product-detail-rating">
                    <div class="pro-details-brand">
                      <span>
                        Brands:
                        <a href="shop-grid-right.html">Bootstrap</a></span
                      >
                    </div>
                    <div class="product-rate-cover text-end">
                      <div class="product-rate d-inline-block">
                        <div class="product-rating" style="width: 90%"></div>
                      </div>
                      <span class="font-small ml-5 text-muted">
                        (25 reviews)</span
                      >
                    </div>
                  </div>
                  <div class="clearfix product-price-cover">
                    <div class="product-price primary-color float-left">
                      <ins><span class="text-brand">$120.00</span></ins>
                      <ins
                        ><span class="old-price font-md ml-15"
                          >$200.00</span
                        ></ins
                      >
                      <span class="save-price font-md color3 ml-15"
                        >25% Off</span
                      >
                    </div>
                  </div>
                  <div class="bt-1 border-color-1 mt-15 mb-15"></div>
                  <div class="short-desc mb-30">
                    <p class="font-sm">
                      Lorem ipsum dolor, sit amet consectetur adipisicing elit.
                      Aliquam rem officia, corrupti reiciendis minima nisi
                      modi,!
                    </p>
                  </div>

                  <div class="attr-detail attr-color mb-15">
                    <strong class="mr-10">Color</strong>
                    <ul class="list-filter color-filter">
                      <li>
                        <a href="#" data-color="Red"
                          ><span class="product-color-red"></span
                        ></a>
                      </li>
                      <li>
                        <a href="#" data-color="Yellow"
                          ><span class="product-color-yellow"></span
                        ></a>
                      </li>
                      <li class="active">
                        <a href="#" data-color="White"
                          ><span class="product-color-white"></span
                        ></a>
                      </li>
                      <li>
                        <a href="#" data-color="Orange"
                          ><span class="product-color-orange"></span
                        ></a>
                      </li>
                      <li>
                        <a href="#" data-color="Cyan"
                          ><span class="product-color-cyan"></span
                        ></a>
                      </li>
                      <li>
                        <a href="#" data-color="Green"
                          ><span class="product-color-green"></span
                        ></a>
                      </li>
                      <li>
                        <a href="#" data-color="Purple"
                          ><span class="product-color-purple"></span
                        ></a>
                      </li>
                    </ul>
                  </div>
                  <div class="attr-detail attr-size">
                    <strong class="mr-10">Size</strong>
                    <ul class="list-filter size-filter font-small">
                      <li><a href="#">S</a></li>
                      <li class="active"><a href="#">M</a></li>
                      <li><a href="#">L</a></li>
                      <li><a href="#">XL</a></li>
                      <li><a href="#">XXL</a></li>
                    </ul>
                  </div>
                  <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                  <div class="detail-extralink">
                    <div class="detail-qty border radius">
                      <a href="#" class="qty-down"
                        ><i class="fi-rs-angle-small-down"></i
                      ></a>
                      <span class="qty-val">1</span>
                      <a href="#" class="qty-up"
                        ><i class="fi-rs-angle-small-up"></i
                      ></a>
                    </div>
                    <div class="product-extra-link2">
                      <button type="submit" class="button button-add-to-cart">
                        Add to cart
                      </button>
                      <a
                        aria-label="Add To Wishlist"
                        class="action-btn hover-up"
                        href="shop-wishlist.html"
                        ><i class="fi-rs-heart"></i
                      ></a>
                      <a
                        aria-label="Compare"
                        class="action-btn hover-up"
                        href="shop-compare.html"
                        ><i class="fi-rs-shuffle"></i
                      ></a>
                    </div>
                  </div>
                  <ul class="product-meta font-xs color-grey mt-50">
                    <li class="mb-5">SKU: <a href="#">FWM15VKT</a></li>
                    <li class="mb-5">
                      Tags: <a href="#" rel="tag">Cloth</a>,
                      <a href="#" rel="tag">Women</a>,
                      <a href="#" rel="tag">Dress</a>
                    </li>
                    <li>
                      Availability:<span class="in-stock text-success ml-5"
                        >8 Items In Stock</span
                      >
                    </li>
                  </ul>
                </div>
                <!-- Detail Info -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <header class="header-area header-style-1 header-height-1">
      <!-- <div class="header-top header-top-ptb-1 d-none d-lg-block">
        <div class="container">
          <div class="row align-items-center">
            
            

          </div>
        </div>
      </div> -->
      <div class="header-middle header-middle-ptb-1 d-none d-lg-block">
        <div class="container">
          <div class="header-wrap">
            <div class="logo logo-width-1">
              <a href="/">
                <h1>WatchNest</h1>
              </a>
            </div>
            <div class="header-right">
              <div class="search-style-1">
                <form action="/search" method="GET">
                  <input type="text" name="q" placeholder="Search for items..." /> 
                  <button type="submit"><i class="fi-rs-search"></i></button>
                </form>
              </div>
              <div class="header-action-right">
                <div class="header-action-2">
                  
                  <div class="header-action-icon-2">
                    <a href="/wishlist">
                      <img class="svgInject" alt="Evara" src="/static/User_assets/imgs/theme/icons/icon-heart.svg" />
                      <!-- <span class="pro-count blue">4</span> -->
                    </a>
                  </div>
                  <div class="header-action-icon-2">
                    <a class="mini-cart-icon" href="/shopCart">
                      <img alt="Evara" src="/static/User_assets/imgs/theme/icons/icon-cart.svg" />
                      <!-- <span class="pro-count blue">2</span> -->
                    </a>
                  </div>
                  <div class="header-action-icon-2">
                    <a class="mini-cart-icon" href="/usersProfileHome">
                      <i class="fi-rs-user"></i>
                      <!-- <img alt="Evara" src="/static/User_assets/imgs/theme/icons/userProfile.jpg" style="width: 70px; height: 40px;" /> -->
                      
                    </a>
                  </div>




                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="header-bottom header-bottom-bg-color sticky-bar">
        <div class="container">
          <div class="header-wrap header-space-between position-relative">
            <div class="logo logo-width-1 d-block d-lg-none">
              <a href="/"
                ><h1>WatchNest</h1>
              </a>
            </div>
            <div class="header-nav d-none d-lg-flex">
              <!-- <div class="main-categori-wrap d-none d-lg-block">
                <a class="categori-button-active open" href="/shop">
                  <span class="fi-rs-apps"></span> Browse Categories
                </a>
              </div> -->
              <div
                class="main-menu main-menu-padding-1 main-menu-lh-2 d-none d-lg-block"
              >
              <nav>
                <ul>
                  <li>
                    <a class="active" href="/"
                      >Home</a>
                  </li>
                  <li>
                    <a href="/aboutUs">About</a>
                  </li>
                  <li>
                    <a href="/shop">Shop</a>
                  </li>
                </ul>
              </nav>
              </div>
            </div>


            <div class="hotline d-none d-lg-block">
              <ul>
                <i class="fi-rs-sign-out mr-10"></i>

                  <% if (user) { %>

                   <a href="/userLogout">Logout</a>

                  <% }else{ %>
                    <a href="/userLogin">Login</a>
                    <% } %>
                  </ul>
            </div>
           
            
            <div class="header-action-right d-block d-lg-none">
              <div class="header-action-2">
                <div class="header-action-icon-2">
                  <a href="#">
                    <img
                      alt="Evara"
                      src="/static/User_assets/imgs/theme/icons/icon-heart.svg"
                    />
                    <!-- <span class="pro-count white">4</span> -->
                  </a>
                </div>
                <div class="header-action-icon-2">
                  <a class="mini-cart-icon" href="/shopCart">
                    <img
                      alt="Evara"
                      src="/static/User_assets/imgs/theme/icons/icon-cart.svg"
                    />
                    <!-- <span class="pro-count white">2</span> -->
                  </a>
                  

                </div>
                <div class="header-action-icon-2 d-block d-lg-none">
                  <div class="burger-icon burger-icon-white">
                    <span class="burger-icon-top"></span>
                    <span class="burger-icon-mid"></span>
                    <span class="burger-icon-bottom"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <div class="mobile-header-active mobile-header-wrapper-style">
      <div class="mobile-header-wrapper-inner">
        <div class="mobile-header-top">
          <div class="mobile-header-logo">
            <a href="/"
              ><h1>WatchNest</h1></a>
          </div>
          <div
            class="mobile-menu-close close-style-wrap close-style-position-inherit"
          >
            <button class="close-style search-close">
              <i class="icon-top"></i>
              <i class="icon-bottom"></i>
            </button>
          </div>
        </div>
        <div class="mobile-header-content-area">
          <div class="mobile-search search-style-3 mobile-header-border">
            <form action="#">
              <input type="text" placeholder="Search for items…" />
              <button type="submit"><i class="fi-rs-search"></i></button>
            </form>
          </div>
          <div class="mobile-menu-wrap mobile-header-border">
            <div class="main-categori-wrap mobile-header-border">
              <a class="categori-button-active-2" href="#">
                <span class="fi-rs-apps"></span> Browse Categories
              </a>
              
            </div>
            <!-- mobile menu start -->
            <nav>
              <ul class="mobile-menu">
                <li class="menu-item-has-children">
                  <span class="menu-expand"></span><a href="/">Home</a>
                </li>
                <li class="menu-item-has-children">
                  <span class="menu-expand"></span
                  ><a href="/shop">shop</a>
                </li>
                


                <li class="menu-item-has-children">
                  <span class="menu-expand"></span
                  ><a href="blog-category-fullwidth.html">Blog</a>
                  
                </li>
                <li class="menu-item-has-children">
                  <span class="menu-expand"></span><a href="#">Pages</a>
                  <ul class="dropdown">
                    <li><a href="page-about.html">About Us</a></li>
                    <li><a href="page-contact.html">Contact</a></li>
                    <li><a href="page-account.html">My Account</a></li>
                    <li>
                      <a href="page-login-register.html">login/register</a>
                    </li>
                    <li>
                      <a href="page-purchase-guide.html">Purchase Guide</a>
                    </li>
                    <li>
                      <a href="page-privacy-policy.html">Privacy Policy</a>
                    </li>
                    <li><a href="page-terms.html">Terms of Service</a></li>
                    <li><a href="page-404.html">404 Page</a></li>
                  </ul>
                </li>
                <li class="menu-item-has-children">
                  <span class="menu-expand"></span><a href="#">Language</a>
                  <ul class="dropdown">
                    <li><a href="#">English</a></li>
                    <li><a href="#">French</a></li>
                    <li><a href="#">German</a></li>
                    <li><a href="#">Spanish</a></li>
                  </ul>
                </li>
              </ul>
            </nav>
            <!-- mobile menu end -->
          </div>
          <div class="mobile-header-info-wrap mobile-header-border">
            <div class="single-mobile-header-info mt-30">
              <a href="page-contact.html"> Our location </a>
            </div>
            <div class="single-mobile-header-info">
              <a href="page-login-register.html">Log In / Sign Up </a>
            </div>
            <div class="single-mobile-header-info">
              <a href="#">(+01) - 2345 - 6789 </a>
            </div>
          </div>
          <div class="mobile-social-icon">
            <h5 class="mb-15 text-grey-4">Follow Us</h5>
            <a href="#"
              ><img
                src="/static/User_assets/imgs/theme/icons/icon-facebook.svg"
                alt=""
            /></a>
            <a href="#"
              ><img
                src="/static/User_assets/imgs/theme/icons/icon-twitter.svg"
                alt=""
            /></a>
            <a href="#"
              ><img
                src="/static/User_assets/imgs/theme/icons/icon-instagram.svg"
                alt=""
            /></a>
            <a href="#"
              ><img
                src="/static/User_assets/imgs/theme/icons/icon-pinterest.svg"
                alt=""
            /></a>
            <a href="#"
              ><img
                src="/static/User_assets/imgs/theme/icons/icon-youtube.svg"
                alt=""
            /></a>
          </div>
        </div>
      </div>
    </div>
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="index.html" rel="nofollow">Home</a>
                    <span></span> Shop
                    <span></span> Checkout
                </div>
            </div>
        </div>
        <section class="mt-50 mb-50">
            <div class="container">
                
                <form id="orderForm" action="/orderPost" method="POST">
                  <div class="row">
                    
                    <% if (locals.error) { %>
                      <div class="alert alert-danger text-center m-3" id="error"><%= locals.error  %></div>
                     <% } %>
                      <div class="col-md-6">
                          <div class="mb-25">
                              <div class="col-md-12">
                                  <div class="billing-page">
                                      <h1>Billing Details</h1>
                                      <br>
                                      <div class="billing-details">
                                          <label for="name">Name:</label>
                                          <span><%= data.name  %></span>
                                      </div>
                                      <div class="billing-details">
                                          <label for="email">Email:</label>
                                          <span><%= data.email  %></span>
                                      </div>
                                      <div class="billing-details">
                                          <label for="phone">Phone:</label>
                                          <span><%= data.phone  %></span>
                                      </div>
                                  </div> 
                                  <% if (!address || !address.addressDetails || address.addressDetails.length ===0 ) { %>
                                    <a href="/addressAddCheckOut" class="btn btn-fill-out submit">Add Address</a>
                                    <!-- <div class="text-center mb-3"> -->
                                      <div id="addressError" style="display: none; background-color: #ffffff; border: 1px solid #ffffff; color: #b71d2c; padding: 10px; border-radius: 5px; font-family: Arial, sans-serif; font-size: 16px;">
                                          <strong>Error:</strong> Please add an address.
                                      </div>
                                  <!-- </div> -->
                                  
                                  
                                  
                                  <% } else { %>
                                        <% address.addressDetails.forEach((address,index) => { %>
                                            <div class="address-box" id="address<%= index + 1 %>">
                                                <label>
                                                  <div class="radio-box" style="display: inline-block; vertical-align: middle;">
                                                    <input style="margin: 3px 10px 0px 0px; vertical-align: middle;" type="radio" name="addressId" value="<%= address._id %>" checked>
                                                    <h3 style="display: inline-block; margin: 0px; vertical-align: middle;" onclick="toggleAddressDetails('<%= index + 1 %>', '<%= address._id %>')">Address <%= index + 1 %></h3>
                                                </div>
                                                </label>
                                                <div class="address-details" style="display: show;">
                                                    <input type="hidden" name="id" value="<%= address._id %>">
                                                    <address>
                                                        <%= address.address %><br>
                                                        <%= address.street %>,<br>
                                                        <%= address.city %>. <br>
                                                        <%= address.state %>, <%= address.zip %>,<br>
                                                        <%= address.country %>
                                                    </address>
                                                </div>
                                            </div>
                                        <% }) %>
                                        <a href="/addressAddCheckOut" class="btn btn-fill-out submit">Add Address</a>
                                  <% } %>
                              </div>
                          </div>

                          






                          <div class="bodyy">
                            <div class="coupon-container">
                              <% if (coupons.length === 0) { %>
                                <p>You have no coupons available.</p>
                            <% } else { %>
                              <% coupons.forEach(function(coupon) { %>
                                <div class="coupon-box">
                                 
                                    <div class="coupon-title">Coupon:<%= coupon.coupon_code %></div>
                                    <div class="coupon-details">
                                        <span class="coupon-detail coupon-detail-label"><%= coupon.description %></span>
                                        <!-- <span class="coupon-detail coupon-detail-value">20% off</span> -->
                                    </div>
                                   
                                </div>
                                <% }); %>
                                <% } %>  
                            </div>
                            </div>

                          <div class="col-lg-12">
                           

                           
                            <div>
                                <div class="panel-body">
                                    <!-- <p class="mb-30 font-sm">Manage your coupon below.</p> -->
                                    <div class="form-group">
                                        <input type="text" id="couponCode" name="couponCode" placeholder="Enter Coupon Code...">
                                    </div>
                                    <div class="form-group">
                                        <button class="btn btn-md" id="applyCouponBtn">Apply Coupon</button>
                                       
                                    </div>
                                </div>
                            </div>
                        </div>
                        


                          <!-- coupon -->
                        
                        

                          

                         
    
                      </div>
                      <div class="col-md-6">
                          <div class="order_review">
                              <div class="mb-20">
                                  <h4>Your Orders</h4>
                              </div>
                              <div class="table-responsive order_table text-center">
                                  <table class="table">
                                      <thead>
                                          <tr>
                                              <th colspan="2">Product</th>
                                              <th>Total</th>
                                          </tr>
                                      </thead>
                                      <!-- 999999 -->
                                      <tbody>
                                          
                                              <% cart.items.forEach(carts => { %>
                                                  <tr>
                                                      <td class="image product-thumbnail"><img src="static/products/<%= carts.product.images[0]%>" alt="#"> </td>
                                                      <td>
                                                          <h5><%= carts.product.product  %></a></h5> <span class="product-qty">x <%= carts.quantity %></span>
                                                      </td>
                                                      <td>₹<%= carts.price * carts.quantity %></td>
                                                  </tr>
                                              <% }) %>
                                              
                                             
                                              <tr>
                                                  <th>Shipping</th>
                                                  <td colspan="2"><em>₹ 60
                                                  </em></td>
                                              </tr>
                                              <tr>
                                                <th>Discount</th>
                                                <td colspan="2"><em> ₹<span style="color: #45a049;"  id="couponId" ><%= cart.couponDiscount%></span>
                                                  <input type="hidden" name="couponDiscount" id="discountId" value="<%= cart.couponDiscount%>">

                                                </em></td>
                                            </tr>
                                             
                                              <tr>
                                                  <th>Total</th>
                                                  <td colspan="2" class="product-subtotal">
                                                    <span class="font-xl text-brand fw-900">Rs :</span>
                                                    <span id="subtotal" class="font-xl text-brand fw-900"><%= cart.totalPrice +60 %></span>
                                                    <input type="hidden" name="totalPrice" id="totalPriceInput" value="<%= cart.totalPrice +60 %>">
                                                </td>
                                                <!-- <input type="hidden" id="couponId"> -->
                                                
                                              </tr>
                                          
                                      </tbody>
                                  </table>
                              </div>

                              <div>
                              </div>
                              <div class= "text-end d-flex justify-content-between" id="couponDetails"></div>
                              
                              <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                              <div class="payment_method">
                                <div class="mb-25">
                                    <h5>Payment</h5>
                                </div>
                                <div class="form-group">
                                  <div class="checkout_input_checkbox">
                                      <label for="payment-razorpay" class="payment-label">
                                          Razorpay
                                          <input type="checkbox" id="payment-razorpay" name="paymentMethod" value="Razorpay" class="payment-checkbox">
                                          <span class="checkmark"></span>
                                      </label>
                                  </div>
                                  <div class="checkout_input_checkbox">
                                      <label for="payment-cod" class="payment-label">
                                          COD
                                          <input type="checkbox" id="payment-cod" name="paymentMethod" value="COD" class="payment-checkbox">
                                          <span class="checkmark"></span>
                                      </label>
                                  </div>
                                  <div class="checkout_input_checkbox">
                                      <label for="payment-wallet" class="payment-label">
                                          Wallet
                                          <input type="checkbox" id="payment-wallet" name="paymentMethod" value="Wallet" class="payment-checkbox">
                                          <span class="checkmark"></span>
                                      </label>
                                  </div>
                              </div>
                              
                                    <div id="check-error"  style="display: none; background-color: #ffffff; border: 1px solid #ffffff; color: #b71d2c; padding: 10px; border-radius: 5px; font-family: Arial, sans-serif; font-size: 16px; display: none;">
                                        Please select a payment method before placing the order.
                                    </div>
                                </div>
                                <input type="hidden" name="orderId" value="<%= cart._id%>">
                                <input type="hidden" id="paymentStatus" name="paymentStatus">
                                <button type="submit" class="btn btn-primary">Place Order</button>
                            </div>
                          </div>
                        </div>

              </form>
             



              

            </div>
        </section>
    </main>

    <footer class="main">
      <section class="newsletter p-30 text-white wow fadeIn animated" style=" background-color:black">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-lg-7 mb-md-3 mb-lg-0">
              <div class="row align-items-center">
                <div class="col flex-horizontal-center">
                  <h4 class="font-size-20 mb-0 ml-3">Sign up </h4>
                </div>
                <div class="col my-4 my-md-0 des">
                  
                </div>
              </div>
            </div>
            <div class="col-lg-5">
              <!-- Subscribe Form -->
              <form class="form-subcriber d-flex wow fadeIn animated">
                <input
                  type="email"
                  class="form-control bg-white font-small"
                  placeholder="Enter your email"
                />
                <a class="btn bg-dark text-white" type="submit" href="/userSginup">
                  Signup
                </a>
              </form>
              <!-- End Subscribe Form -->
            </div>
          </div>
        </div>
      </section>
      <section class="section-padding footer-mid">
        <div class="container pt-15 pb-20">
          <div class="row">
            <div class="col-lg-6 col-md-6">
              <div class="widget-about font-md mb-md-5 mb-lg-0">
                <div class="logo logo-width-1 wow fadeIn animated">
                  <a href="/"
                    ><h1>WatchNest</h1></a>
                </div>
                <h5 class="mt-20 mb-10 fw-600 text-grey-4 wow fadeIn animated">
                  Contact
                </h5>
                <p class="wow fadeIn animated">
                  <strong>Address: </strong>27 Division St, New Delhil,ND 10002, India
                </p>
                <p class="wow fadeIn animated">
                  <strong>Phone: </strong>+91 9747277777
                </p>
                <p class="wow fadeIn animated">
                  <strong>Hours: </strong>10:00 - 18:00, Mon - Sat
                </p>
                <h5 class="mb-10 mt-30 fw-600 text-grey-4 wow fadeIn animated">
                  Follow Us
                </h5>
                <div
                  class="mobile-social-icon wow fadeIn animated mb-sm-5 mb-md-0"
                >
                  <a href="#"
                    ><img
                      src="/static/User_assets/imgs/theme/icons/icon-facebook.svg"
                      alt=""
                  /></a>
                  <a href="#"
                    ><img
                      src="/static/User_assets/imgs/theme/icons/icon-twitter.svg"
                      alt=""
                  /></a>
                  <a href="#"
                    ><img
                      src="/static/User_assets/imgs/theme/icons/icon-instagram.svg"
                      alt=""
                  /></a>
                  <a href="#"
                    ><img
                      src="/static/User_assets/imgs/theme/icons/icon-pinterest.svg"
                      alt=""
                  /></a>
                  <a href="#"
                    ><img
                      src="/static/User_assets/imgs/theme/icons/icon-youtube.svg"
                      alt=""
                  /></a>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-3">
              <h5 class="widget-title wow fadeIn animated">About</h5>
              <ul class="footer-list wow fadeIn animated mb-sm-5 mb-md-0">
                <li><a href="#">About Us</a></li>
                <li><a href="#">Delivery Information</a></li>
                <li><a href="#">Privacy Policy</a></li>
                <li><a href="#">Terms &amp; Conditions</a></li>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">Support Center</a></li>
              </ul>
            </div>
            <div class="col-lg-3 col-md-3">
              <h5 class="widget-title wow fadeIn animated">My Account</h5>
              <ul class="footer-list wow fadeIn animated">
                <li><a href="/userSginup">Sign In</a></li>
                <li><a href="/shopCart">View Cart</a></li>
                <li><a href="/wishlist">My Wishlist</a></li>
                <li><a href="/usersProfileHome">Account</a></li>
                <li><a href="/ordersProfile">Order</a></li>
              </ul>
            </div>
           
          </div>
        </div>
      </section>
      
    </footer>
    <script>
      function validateAddress() {
         
          var addressCount = document.querySelectorAll('.address-box').length;
  
          
          if (addressCount === 0) {
              var errorMessage = document.getElementById('addressError');
              if (errorMessage) {
                  errorMessage.innerHTML = 'Please add an address.';
                  errorMessage.style.display = 'block'; 
                  setTimeout(()=>{
                    errorMessage.style.display = 'none'; 
                  },3000)
              }
              return false; 
          } else {
              
              // document.getElementById('addressError').style.display = 'none';
               validateForm(); 
          }
      }
  </script>



    <script>
      setTimeout(() => {
      document.getElementById("alert").style.display = "none";
      }, 5000);
  </script>
  <script>
    function toggleAddressDetails(addressIndex, addressId) {
        var addressDetails = document.getElementById('address' + addressIndex).getElementsByClassName('address-details')[0];
        if (addressDetails.style.display === 'none') {
            addressDetails.style.display = 'block';
        } else {
            addressDetails.style.display = 'none';
        }

        // Call setDefault function to update default address
        setDefault(addressId);
    }

    // function setDefault(addressId) {
    //     // Make AJAX request to update default address
    //     fetch('/defaultAddress', {
    //         method: 'POST',
    //         headers: {
    //             'Content-Type': 'application/json'
    //         },
    //         body: JSON.stringify({ addressId: addressId })
    //     })
    //     .then(response => {
    //         if (response.ok) {
    //             console.log('Default address updated successfully');
    //         } else {
    //             console.error('Error updating default address:', response.statusText);
    //         }
    //     })
    //     .catch(error => {
    //         console.error('Error updating default address:', error);
    //     });
    // }
</script>






<!-- payment -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  var checkError = document.getElementById("check-error");

  function validateForm() {
  const paymentCODCheckbox = document.getElementById("payment-cod");
  const paymentRazorpayCheckbox = document.getElementById("payment-razorpay");
  const paymentWalletCheckbox = document.getElementById("payment-wallet");
  const paymentStatusInput = document.getElementById("paymentStatus");
  const checkedCount = [paymentCODCheckbox, paymentRazorpayCheckbox, paymentWalletCheckbox].filter(checkbox => checkbox.checked).length;

  const totalPriceInput = document.getElementById("subtotal");
        const totalPrice = parseFloat(totalPriceInput.innerText);
  console.log(totalPrice);

  if (checkedCount !== 1) {
    checkError.style.display = "block";
    checkError.innerHTML = "Please select only one payment method";
    checkError.style.color = "red";
    setTimeout(function () {
      checkError.style.display = "none";
    }, 3000);
    return false;
  }
  else if (totalPrice > 1000 && paymentCODCheckbox.checked) {
    paymentStatusInput.value = "Pending";
    checkError.style.display = "block";
    checkError.innerHTML = "COD is not available for orders above Rs 1000.";
    checkError.style.color = "red";
    setTimeout(function () {
      checkError.style.display = "none";
    }, 3000);
    return false;
  } else if (!paymentCODCheckbox.checked && !paymentRazorpayCheckbox.checked && !paymentWalletCheckbox.checked) {
    checkError.style.display = "block";
    checkError.innerHTML = "Please select a payment method";
    checkError.style.color = "red";
    setTimeout(function () {
      checkError.style.display = "none";
    }, 3000);
    return false;
  }  else if (paymentRazorpayCheckbox.checked) {
    initiateRazorpayPayment();
    return false;
    } else if (paymentCODCheckbox.checked) {
      paymentStatusInput.value = "Pending";
      Swal.fire({
        title: "Are you sure?",
        text: "Do you want to place the order?",
        icon: "question",
        showCancelButton: true,
        confirmButtonColor: "#088178",
        cancelButtonColor: "#d33",
        confirmButtonText: "Yes, place order",
      }).then((result) => {
        if (result.isConfirmed) {
          console.log("Order placed");
          document.getElementById("orderForm").submit();
        }
      });
      return false;
    }else  if (paymentWalletCheckbox.checked){
      console.log("hai");
                fetch('/check-wallet-balance')
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            const walletBalance = data.balance;
                            if (totalPrice <= walletBalance) {
                                document.getElementById('paymentStatus').value = 'Paid';
                                Swal.fire({
                                    title: "Are you sure?",
                                    text: "Do you want to place the order?",
                                    icon: "question",
                                    showCancelButton: true,
                                    confirmButtonColor: "#3085d6",
                                    cancelButtonColor: "#d33",
                                    confirmButtonText: "Yes, place order",
                                }).then((result) => {
                                    if (result.isConfirmed) {
                                        console.log("Order placed");
                                        withdrawFunds()
                                        // document.getElementById("orderForm").submit();
                                    }
                                });
                            } else {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Insufficient Wallet Balance',
                                    text: 'Your wallet balance is not sufficient to complete the transaction.',
                                    showConfirmButton: true
                                });
                            }
                        } else {
                            Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                text: 'Failed to fetch wallet balance. Please try again later.',
                                showConfirmButton: true
                            });
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
                return false;
            }
        
  }

  document.getElementById("orderForm").addEventListener("submit", function (event) {
    event.preventDefault();
    validateAddress()
  });
  

  function initiateRazorpayPayment() {

    const data = {
      name: "<%= data.name %>",
      email: "<%= data.email %>",
      phone: "<%= data.phone %>",
    };
   
    const totalPriceInput = document.getElementById("subtotal");
    console.log("sasast",totalPriceInput);
        const totalPrice = parseFloat(totalPriceInput.innerText);

    console.log(totalPrice);

    var options = {
      key:'<%= razorpayKey %>',
      amount: totalPrice * 100,
      currency: "INR",
      name: "WatchNest",
      description: "Timeless elegance in every detail.",
      image: "/static/products/titleimg.jpg",
      
      handler: function (response) {
        console.log(response);
     
        if (response.razorpay_payment_id) {
            console.log("Payment successful");
            document.getElementById('paymentStatus').value = 'Paid';
          } else {
            console.log("Payment failed or canceled");
            document.getElementById('paymentStatus').value = 'Failed';
          }
        
        submitForm();
      },

      prefill: {
        name: data.name,
        email: data.email,
        contact: data.phone,
      },
      theme: {
        color: "#3399cc",
      },
    };

    var rzp = new Razorpay(options);

    rzp.on('payment.failed', function (response) {
      console.log("Payment failed:", response);
      document.getElementById('paymentStatus').value = 'Failed';
      submitForm();
    });

    rzp.open();
  }

  function submitForm() {
    const form = document.getElementById("orderForm");
    form.submit();
  }


  // ----------------------------


  async function withdrawFunds() {
            const totalPrice = document.getElementById("subtotal");document.getElementById("subtotal")
             const amount = parseFloat(totalPrice.innerText);
            console.log(amount);
            if (!isNaN(amount)) {
                const response = await fetch('/withdrawFunds', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ amount })
                });
                document.getElementById("orderForm").submit();
                const data = await response.json();
                if (data.success) {
                    balanceDisplay.textContent = `Balance: ₹${data.balance}`;
                    addTransaction(amount, 'withdraw');
                    document.getElementById('withdraw-amount').value = '';
                   

                } else {
                    alert(data.message);
                }
            } else {
                alert("Invalid amount!");
            }
        }



</script>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script> 





  <script>
    
  </script>

<!-- shibu -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const applyCouponBtn = document.getElementById("applyCouponBtn");
   

    applyCouponBtn.addEventListener("click", function(event) {
        event.preventDefault();
        const couponCode = document.getElementById("couponCode").value;
        applyCoupon(couponCode);
    });





      async function applyCoupon(couponCode) {
        
  try {
    const response = await fetch(`/checkCoupon`, {
    
      method: 'PATCH',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ couponCode })
    });
    const data = await response.json();
    const newTotalPrice = data.totalAmount.toFixed(2);
        document.getElementById('subtotal').innerText = newTotalPrice ;
        document.getElementById('totalPriceInput').value = newTotalPrice;

    

    const couponDetails = document.getElementById('couponDetails');
    couponDetails.innerHTML = `
      <p class="text-success">you saved <b>&#x20B9;${data.discountAmount}</b> with '${data.couponCode}'</p> <span type="button" class="material-symbols-outlined text-danger" onclick="removeCoupon()">
        <i class="fa-regular fa-circle-xmark fa-xl" style="color: #7a0505;"></i>
</span>
    `;
    document.getElementById('couponId').innerText = data.discountAmount;
    document.getElementById('discountId').value = data.discountAmount;

  } catch (error) {
    console.error(error);
  }
}
});
async function removeCoupon(params) {
 location.reload()
}
</script>



  </script>

  



    <!-- Vendor JS-->
    <script src="/static/User_assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="/static/User_assets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="/static/User_assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="/static/User_assets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="/static/User_assets/js/plugins/slick.js"></script>
    <script src="/static/User_assets/js/plugins/jquery.syotimer.min.js"></script>
    <script src="/static/User_assets/js/plugins/wow.js"></script>
    <script src="/static/User_assets/js/plugins/jquery-ui.js"></script>
    <script src="/static/User_assets/js/plugins/perfect-scrollbar.js"></script>
    <script src="/static/User_assets/js/plugins/magnific-popup.js"></script>
    <script src="/static/User_assets/js/plugins/select2.min.js"></script>
    <script src="/static/User_assets/js/plugins/waypoints.js"></script>
    <script src="/static/User_assets/js/plugins/counterup.js"></script>
    <script src="/static/User_assets/js/plugins/jquery.countdown.min.js"></script>
    <script src="/static/User_assets/js/plugins/images-loaded.js"></script>
    <script src="/static/User_assets/js/plugins/isotope.js"></script>
    <script src="/static/User_assets/js/plugins/scrollup.js"></script>
    <script src="/static/User_assets/js/plugins/jquery.vticker-min.js"></script>
    <script src="/static/User_assets/js/plugins/jquery.theia.sticky.js"></script>
    <script src="/static/User_assets/js/plugins/jquery.elevatezoom.js"></script>
    <!-- Template  JS -->
    <script src="/static/User_assets/js/main.js?v=3.4"></script>
    <script src="/static/User_assets/js/shop.js?v=3.4"></script>
  </body>
</html>
