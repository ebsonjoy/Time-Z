<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Evara Dashboard</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/static/assets/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <link href="/static/assets/css/main.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <main>

        <section class="content-main mt-80 mb-80">
            <div class="card mx-auto card-login">
                <div class="card-body">
                    <h4 class="card-title mb-4">Reset Your Password</h4>
                    <form action="/resetpassword" method="post">
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input class="form-control" placeholder="Your email" name="email" type="text" id="contact-email" required onkeyup="validateEmail()">
                            <span id="email-error" style="font-size: 14px;"></span>
                        </div> 
                        <div class="mb-3">
                            <label class="form-label">Create New password</label>
                            <input class="form-control" placeholder="Password" name="password" type="password" id="contact-password" required onkeyup="validatePassword()">
                            <span id="password-error" style="font-size: 14px;"></span>
                        </div>
                        <div class="mb-4">
                            <button type="submit" class="btn btn-primary w-100" onclick="return validateForm()"> Login </button>
                            <span id="submit-error" style="font-size: 14px;"></span>
                        </div>
                    </form>
                </div>
            </div>
        </section>
 </main>
    <script src="/static/assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="/static/assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="/static/assets/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="/static/assets/js/main.js" type="text/javascript"></script>
    <script>
        setTimeout(() => {
        document.getElementById("error").style.display = "none";
        }, 3000);
    </script>

<!-- validation -->

<script>
  var emailError = document.getElementById("email-error");
  var passwordError = document.getElementById("password-error");
  var submitError = document.getElementById("submit-error");

  

  function validateEmail() {
  var email = document.getElementById("contact-email").value.trim();
  var emailError = document.getElementById("email-error");

  if (email.length === 0) {
    emailError.innerHTML = "Email is required";
    emailError.style.color = "red";
    return false;
  }

  // Regular expression for a comprehensive email validation
  var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

  if (!emailRegex.test(email)) {
    emailError.innerHTML = "Email is invalid";
    emailError.style.color = "red";
    return false;
  }

  // Additional check to verify that the domain has at least one dot
  var domain = email.split("@")[1];
  if (!domain.includes(".")) {
    emailError.innerHTML = "Invalid domain in email";
    emailError.style.color = "red";
    return false;
  }

  // Additional check to ensure the length of local part and domain part is within limits
  var localPart = email.split("@")[0];
  if (localPart.length > 64) {
    emailError.innerHTML = "Local part of email is too long";
    emailError.style.color = "red";
    return false;
  }

  if (domain.length > 253) {
    emailError.innerHTML = "Domain part of email is too long";
    emailError.style.color = "red";
    return false;
  }

  // Additional check to ensure the TLD is valid
  var tld = domain.split(".").pop();
  if (tld.length < 2 || tld.length > 63) {
    emailError.innerHTML = "Invalid top-level domain (TLD)";
    emailError.style.color = "red";
    return false;
  }

  emailError.innerHTML = "Valid";
  emailError.style.color = "green";
  return true;
}

 

  function validatePassword() {
    var password = document.getElementById("contact-password").value.trim();

    if (password.length === 0) {
      passwordError.innerHTML = "Password is required";
      passwordError.style.color = "red";
      return false;
    }
    if (
      password.length < 8 ||
      !/[a-zA-Z]/.test(password) ||
      !/\d/.test(password) ||
      !/[!@#$%^&*(),.?":{}|<>]/.test(password)
    ) {
      passwordError.innerHTML =
        "Password must be at least 8 characters <br> Password must contain at least one letter <br> Password must contain at least one number <br> Password must contain at least one special character";
      passwordError.style.color = "red";
      return false;
    }

    passwordError.innerHTML = "Strong Password";
    passwordError.style.color = "green";
    return true;
  }

 

  function validateForm() {
    if (
      
      !validateEmail() ||
      !validatePassword()
      
    ) {
      submitError.style.display = "block";
      submitError.innerHTML = "Please enter all the fields to submit ";
      submitError.style.color = "red";
      setTimeout(function () {
        submitError.style.display = "none";
      }, 3000);
      return false;
    }
  }
</script>
<script>
  setTimeout(() => {
    document.getElementById("error").style.display = "none";
  }, 3000);
  setTimeout(() => {
    document.getElementById("warning").style.display = "none";
  }, 3000);
</script>

  <script>
    setTimeout(() => {
      document.getElementById("error").style.display = "none";
    }, 3000);
    setTimeout(() => {
      document.getElementById("warning").style.display = "none";
    }, 3000);
  </script>

</body>

</html>